image : python:3

before_script:
  - apt-get update -qq && apt-get install -y -qq python-pip pandoc python3-wheel
  - pip install -r requirements.txt
  - pip install -e .

flake8:
  script:
    - flake8 .

pytest:
  script:
    - export RENOM_PRECISION=64
    - py.test
    - export RENOM_PRECISION=32
    - py.test


pages:
  script:
    - python3 setup.py bdist_wheel sdist
    - mkdir -p public/bin
    - cp dist/* public/bin
    - ls public/bin

  artifacts:
    paths:
      - public

  only:
    - beta
